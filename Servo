//Program wczytuje ciąg cyfr, następnie zmienia położenie servonapędu w określonym przedziale zaczynająć zawsze od 0, jak w klasycznym telefonie z obrotową tarczą.
//Przykład: 531555132: 0 - 5 - 0 - 3 - 0 - 1 - 0...... 
//#include <StandardCplusplus.h>
#include<servo.h>

Servo myservo;

#define servoPin 9

int numbers[9];
String phone;
String phone_s = "";
boolean not_number = false;
int phone_2; 
int iterator;
const int SIZE = 9;
int digits[SIZE];
int angle = 0;

void setup() {
  // put your setup code here, to run once:
  iterator = 0;
  Serial.begin(9600);
  myservo.attach(servoPin);
}

void loop() {

 cycle();
 
 for(int k;k<SIZE;k++){
 
 if (digits[k] == 1) angle = 20;
 else if (digits[k] == 2) angle = 40;
 else if (digits[k] == 3) angle = 60;
 else if (digits[k] == 4) angle = 80;
 else if (digits[k] == 5) angle = 100;
 else if (digits[k] == 6) angle = 120;
 else if (digits[k] == 7) angle = 140;
 else if (digits[k] == 8) angle = 160;
 else  angle = 180;
 
 myservo.write(angle);
 delay(1000);
 myservo.write(0);
 delay(1000);
 
 }
 
  myservo.write(90);
  delay(1000);
  myservo.write(180);
  delay(1000);
  myservo.write(0);
  delay(1000);
  
  
}

void cycle(){
  //Serial.println("Enter phone number");
  while( Serial.available() == 0){}
  phone = Serial.readString();
  for(int i=0;i<phone.length()-1;i++){
    digits[i] = phone[i] - 48;
    Serial.print(phone[i]-48);
    //Teraz ściągnąć dane do tablicy
    
    }
    Serial.println("");
    for (int j=0;j<phone.length()-1;j++){
      Serial.print("Number:");
      
      Serial.print(j);
      Serial.println(digits[j]);
    }
}
//void cycle(){
//  //Serial.println("Enter phone number");
//  while( Serial.available() == 0){}
//  phone = Serial.read();
//  if (phone == 'n') iterator = 0;
//  if (phone != 10 and phone != 'n'){
//    numbers[iterator] = (int) phone; 
//    iterator += 1;
//    Serial.print("Number:");
//    Serial.println(phone-48);
//  }
//  for(int i=0;i<iterator;i++){
//    Serial.print(numbers[i]-48);
//    }
//    Serial.println("");
// }
